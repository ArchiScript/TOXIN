"use strict";(self.webpackChunktoxin=self.webpackChunktoxin||[]).push([[865],{5865:function(t,e,n){function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function s(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return o(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,s=function(){};return{s:s,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,c=!0,l=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return c=t.done,t},e:function(t){l=!0,a=t},f:function(){try{c||null==n.return||n.return()}finally{if(l)throw a}}}}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function a(t,e){for(var n=0;n<e.length;n++){var s=e[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==i(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var s=n.call(t,"string");if("object"!==i(s))return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(s.key),"symbol"===i(o)?o:String(o)),s)}var o}function c(t,e){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.add(t)}function l(t,e,n){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return n}n.d(e,{P:function(){return d}}),n(9554);var r=new WeakSet,u=new WeakSet,h=new WeakSet,d=function(){function t(e,n){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),c(this,h),c(this,u),c(this,r),this.$el=document.querySelector(e),this.$el){this.options=n?this.mergeUserOptions(n):this.getDefaultOptions();var i=this.options.isInline;this.isInline=i,l(this,r,v).call(this),l(this,u,f).call(this),this.plus(),this.minus(),this.print()}else console.log("The essential DOM element for this script is not found")}var e,n;return e=t,(n=[{key:"clickHandler",value:function(t){var e=t.target.dataset.type;"input"===e?this.toggle():"backdrop"===e&&this.close()}},{key:"buttonsClickHandler",value:function(){var t=this;this.$buttonClear&&this.$buttonClear.addEventListener("click",(function(){t.clear()})),this.$buttonSubmit&&this.$buttonSubmit.addEventListener("click",(function(){t.submit()}))}},{key:"inlineDropdown",value:function(){this.$el.classList.contains("inline")||this.$el.classList.add("inline"),this.open()}},{key:"isOpen",get:function(){return this.$el.classList.contains("open")}},{key:"toggle",value:function(){this.isOpen&&1==!this.isInline?this.close():this.open()}},{key:"open",value:function(){this.$el.classList.add("open")}},{key:"close",value:function(){this.$el.classList.remove("open")}},{key:"destroy",value:function(){this.$el.removeEventListener("click",this.clickHandler)}},{key:"plus",value:function(){var t,e=this,n=s(this.data);try{var i=function(){var n=t.value,i=e.$el.querySelector(".select__item-".concat(n.id)),s=i.querySelector(".select__item-plus"),o=i.querySelector(".select__item-minus"),a=i.querySelector(".select__item-number");s.addEventListener("click",(function(){n.counter+=1,o.classList.remove("inactive"),a.innerHTML=n.counter,e.$selectText.innerHTML=e.chosenUpdate(),e.buttonRegulator(),e.setInputValue()}))};for(n.s();!(t=n.n()).done;)i()}catch(t){n.e(t)}finally{n.f()}}},{key:"minus",value:function(){var t,e=this,n=s(this.data);try{var i=function(){var n=t.value,i=e.$el.querySelector(".select__item-".concat(n.id)),s=i.querySelector(".select__item-minus"),o=i.querySelector(".select__item-number");s.addEventListener("click",(function(){l(e,h,y).call(e,n.counter)?n.counter:(n.counter-=1,l(e,h,y).call(e,n.counter)&&s.classList.add("inactive")),o.innerHTML=n.counter,e.$selectText.innerHTML=e.chosenUpdate(),e.buttonRegulator(),e.setInputValue()}))};for(n.s();!(t=n.n()).done;)i()}catch(t){n.e(t)}finally{n.f()}}},{key:"setInputValue",value:function(){this.$input.dataset.value=this.countTotal().total}},{key:"buttonRegulator",value:function(){var t,e,n,i;0===this.countTotal()?(null===(t=this.$buttonClear)||void 0===t||t.classList.add("disabled"),null===(e=this.$buttonClear)||void 0===e||e.classList.remove("enabled")):(null===(n=this.$buttonClear)||void 0===n||n.classList.add("enabled"),null===(i=this.$buttonClear)||void 0===i||i.classList.remove("disabled"))}},{key:"declinedText",value:function(t,e){return t+" "+this.declineByQuan(t,e)}},{key:"clear",value:function(){this.$selectText.innerHTML=this.options.placeholder;var t,e=s(this.data);try{for(e.s();!(t=e.n()).done;)t.value.counter=0}catch(t){e.e(t)}finally{e.f()}this.$items.forEach((function(t){t.querySelector(".select__item-number").innerHTML=0,t.querySelector(".select__item-minus").classList.add("inactive")})),this.buttonRegulator(),this.setInputValue()}},{key:"submit",value:function(){this.$selectText.innerHTML=this.chosenUpdate(),this.isInline||this.close()}},{key:"countTotal",value:function(){this.total=0;var t,e=0,n=s(this.data);try{for(n.s();!(t=n.n()).done;){var i=t.value;i.value===this.countException&&(e+=i.counter),this.total+=i.counter}}catch(t){n.e(t)}finally{n.f()}return{total:this.total-e,exc:e}}},{key:"showByTotal",value:function(){var t=this.countTotal().total,e=this.countTotal().exc;if(!l(this,h,y).call(this,t)){var n="".concat(this.declinedText(t,["гость","гостя","гостей"]));return this.countTotal().exc&&(n+=", ".concat(this.declinedText(e,["младенец","младенца","младенцев"]))),n}}},{key:"showByTitles",value:function(){var t,e=[],n=s(this.data);try{for(n.s();!(t=n.n()).done;){var i=t.value;l(this,h,y).call(this,i.counter)||e.push(this.declinedText(i.counter,i.cases))}}catch(t){n.e(t)}finally{n.f()}return e.join(", ")}},{key:"chosenUpdate",value:function(){return"byTitles"==this.countItems?this.showByTitles()||this.options.placeholder:"byTotalNumber"==this.countItems?this.showByTotal()||this.options.placeholder:void 0}},{key:"setValue",value:function(t){this.$input.dataset.value=t}},{key:"declineByQuan",value:function(t,e){return e[t%100>4&&t%100<20?2:[2,0,1,1,1,2][t%10<5?t%10:5]]}},{key:"checkLocalStorage",value:function(){JSON.parse(localStorage.getItem("chosenData"))&&console.log(JSON.parse(localStorage.getItem("chosenData")).guests)}},{key:"setDataObject",value:function(t){var e;if(t){e=t;for(var n=0,i=Object.values(e.chosenItems);n<i.length;n++){var s=i[n];this.data[s.id-1].counter=s.counter,this.$el.querySelector(".select__item-".concat(s.id)).querySelector(".select__item-number").innerHTML=s.counter}this.buttonRegulator(),this.$selectText.innerHTML=e.selectText,this.$input.dataset.value=e.total.total,console.log(e.selectText)}}},{key:"getDataObject",value:function(){var t,e={},n={},i={},o=0,a=0,c=s(this.data);try{for(c.s();!(t=c.n()).done;){var l=t.value,r={};l.counter>0&&(r.id=l.id,r.textValue=this.declinedText(l.counter,l.cases),r.counter=l.counter,"младенцы"!==l.value?(o+=l.counter,r.cases=this.guestsCases):(a+=l.counter,r.cases=l.cases),e["".concat(l.id)]=r)}}catch(t){c.e(t)}finally{c.f()}n.counter=o,n.cases=this.guestsCases,i.counter=a,i.cases=this.guestsCatCases[2];var u=(n.counter>0?"".concat(this.declinedText(n.counter,n.cases),", "):"")+(i.counter>0?"".concat(this.declinedText(i.counter,i.cases)):"");return{total:this.countTotal(),chosenItems:e,guests:n,exceptions:i,selectText:u}}},{key:"getDefaultAccomodationsObj",value:function(){this.accomodationsCases=[["спальня","спальни","спален"],["кровать","кровати","кроватей"],["ванная комната","ванные комнаты","ванных комнат"]];for(var t=this.accomodationsCases,e=[],n=0;n<=t.length-1;n++){var i={};i.id=n+1,i.value=t[n][1],i.counter=0,i.cases=t[n],e.push(i)}return e}},{key:"print",value:function(){}},{key:"getDefaultGuestsObj",value:function(){this.guestsCategories=["взрослые","дети","младенцы"],this.guestsCatCases=[["взрослый","взрослых","взрослых"],["ребёнок","ребёнка","детей"],["младенец","младенца","младенцев"]],this.countException="младенцы",this.guestsCases=["гость","гостя","гостей"];for(var t=this.guestsCatCases,e=[],n=0;n<=t.length-1;n++){var i={};i.id=n+1,i.value=this.guestsCategories[n],i.counter=0,i.cases=t[n],e.push(i)}return e}},{key:"getDefaultOptions",value:function(){var t,e=this.$el.classList.contains("select-accomodations")?"accomodations":"guests",n="Выберите пожалуйста элемент",i=!!this.$el.classList.contains("inline"),s=!1,o="byTitles";return"accomodations"==e?(n="Выберите удобства",t=this.getDefaultAccomodationsObj()):(n="Сколько гостей",t=this.getDefaultGuestsObj(),s=[{name:"buttonClear",value:"очистить"},{name:"buttonSubmit",value:"применить"}],o="byTotalNumber"),{placeholder:n,isInline:i,data:t,buttons:s,countItems:o}}},{key:"mergeUserOptions",value:function(t){return Object.assign(this.getDefaultOptions(),t)}}])&&a(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function v(){var t=this.options,e=t.data,n=t.placeholder,i=t.buttons;this.$el.classList.add("select"),this.$el.innerHTML=p(e,n,i)}function f(){var t=this.options.data;!0===this.isInline&&this.inlineDropdown(),this.data=t,this.clickHandler=this.clickHandler.bind(this),this.$el.addEventListener("click",this.clickHandler),this.$items=this.$el.querySelectorAll(".select__item"),this.$num=this.$el.querySelector(".select__item-number"),this.$input=this.$el.querySelector(".select__input"),this.$selectText=this.$input.querySelector("span"),this.$buttonClear=this.$el.querySelector(".select__button-buttonClear"),this.$buttonSubmit=this.$el.querySelector(".select__button-buttonSubmit");var e=this.options.countItems;this.countItems=e,this.buttonsClickHandler()}function y(t){return 0==t}var p=function(t,e,n){var i="",o="";if(n){var a,c=s(n);try{for(c.s();!(a=c.n()).done;){var l=a.value,r="buttonClear"==l.name?"disabled":"";o+='<div class="button button-noborder select__button-'.concat(l.name," ").concat(r,'">').concat(l.value,"</div>")}}catch(t){c.e(t)}finally{c.f()}i='<div class= "select__buttons">'.concat(o,"</div>")}var u=t.map((function(t){return'\n    \n      <div class="select__item select__item-'.concat(t.id,'">\n      <div class="select__item-name">').concat(t.value,'</div>\n        <div class="select__item-choice">\n          <div class="select__item-minus inactive"><span>-</span></div>\n          <div class="select__item-number"><span>').concat(t.counter,'</span></div>\n          <div class="select__item-plus"><span>+</span></div>\n        </div>\n      </div>  \n    ')}));return'\n  <div class = "select__backdrop" data-type="backdrop"></div>\n  <div class="select__input" data-value="0" data-type="input">\n    <span>'.concat(e,'</span></div>\n  <div class="select__dropdown">\n      <div class="select__items"> \n        ').concat(u.join(""),"\n      </div>\n        ").concat(i,"\n  </div>\n  ")}}}]);
//# sourceMappingURL=865.598981d51dfa5a4b5897.js.map